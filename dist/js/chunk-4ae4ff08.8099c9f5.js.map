{"version":3,"sources":["webpack:///./src/components/TopContent.vue?66c1","webpack:///./src/views/RecommendContent.vue?7b0e","webpack:///./src/components/TopContent.vue?f9d5","webpack:///src/components/TopContent.vue","webpack:///./src/components/TopContent.vue?b9e5","webpack:///./src/components/TopContent.vue","webpack:///src/views/RecommendContent.vue","webpack:///./src/views/RecommendContent.vue?9c05","webpack:///./src/views/RecommendContent.vue","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./src/views/RecommendContent.vue?7eff"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","detailData","_v","_l","item","index","key","id","_s","ref","directives","name","rawName","value","expression","searching","noMore","staticRenderFns","style","backgroundImage","coverImgUrl","_f","playCount","creator","avatarUrl","nickname","props","data","mounted","filters","formatCount","val","toFixed","component","nikename","trackIds","songsList","num","isRequest","components","TopContent","ListItem","Loading","created","window","addEventListener","getMore","destroyed","removeEventListener","methods","scrollTop","clientHeight","barTop","getData","vm","$http","get","beforeRouteEnter","next","$","IndexedObject","toIndexedObject","arrayMethodIsStrict","nativeJoin","join","ES3_STRINGS","Object","STRICT_METHOD","target","proto","forced","separator","call","undefined"],"mappings":"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","file":"js/chunk-4ae4ff08.8099c9f5.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopContent.vue?vue&type=style&index=0&id=78551607&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recommendContent\"},[_c('TopContent',{attrs:{\"detailData\":_vm.detailData}}),_c('div',{staticClass:\"singsList\"},[_vm._v(\"歌曲列表\")]),_c('ul',_vm._l((_vm.songsList),function(item,index){return _c('ListItem',{key:item.id,attrs:{\"item\":item,\"num\":index + 1}},[_c('div',{staticClass:\"order\"},[_vm._v(_vm._s(index + 1))])])}),1),_c('p',{ref:\"scrllBar\"},[_c('Loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searching),expression:\"searching\"}]})],1),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.searching && _vm.noMore),expression:\"!searching && noMore\"}]},[_vm._v(\"没有更多内容了！\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"topContent\"},[_c('div',{staticClass:\"container\",style:({\n      backgroundImage: (\"url(\" + (_vm.detailData.coverImgUrl) + \")\"),\n    })}),_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":_vm.detailData.coverImgUrl}}),_c('span',[_vm._v(_vm._s(_vm._f(\"formatCount\")(_vm.detailData.playCount)))])]),_c('div',{staticClass:\"right\"},[_c('p',[_vm._v(_vm._s(_vm.detailData.name))]),_c('div',{staticClass:\"avatar\"},[_c('img',{attrs:{\"src\":_vm.detailData.creator.avatarUrl}}),_c('span',{staticClass:\"nickname\"},[_vm._v(_vm._s(_vm.detailData.creator.nickname))])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"topContent\">\n    <!-- <img :src=\"detailData.coverImgUrl\" class=\"bg\" /> -->\n    <div\n      class=\"container\"\n      :style=\"{\n        backgroundImage: `url(${detailData.coverImgUrl})`,\n      }\"\n    ></div>\n    <div class=\"box\">\n      <div class=\"left\">\n        <img :src=\"detailData.coverImgUrl\" />\n        <span>{{ detailData.playCount | formatCount }}</span>\n      </div>\n      <div class=\"right\">\n        <p>{{ detailData.name }}</p>\n        <div class=\"avatar\">\n          <img :src=\"detailData.creator.avatarUrl\" />\n          <span class=\"nickname\">{{ detailData.creator.nickname }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'TopContent',\n  props: ['detailData'],\n  data () {\n    return {\n    }\n  },\n  mounted () {\n    // console.log('ppppppp', this.detailData);\n    // console.log('llllllll');\n  },\n  filters: {\n    formatCount (val) {\n      return (val / 10000).toFixed(1) + '万';\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.topContent {\n  padding: 30px 10px 30px 15px;\n  position: relative;\n  overflow: hidden;\n  .container {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    bottom: 0px;\n    right: 0px;\n    filter: blur(20px);\n    z-index: 1;\n    background-repeat: no-repeat;\n    background-size: cover;\n    transform: scale(1.5);\n    background-position: 50%;\n    &::after {\n      content: \"\";\n      background-color: rgba(0, 0, 0, 0.25);\n      position: absolute;\n      top: 0px;\n      left: 0px;\n      bottom: 0px;\n      right: 0px;\n    }\n  }\n  .box {\n    display: flex;\n    justify-content: space-between;\n    position: relative;\n    z-index: 2;\n    .left {\n      position: relative;\n      img {\n        width: 126px;\n        height: 126px;\n      }\n      span {\n        position: absolute;\n        top: 2px;\n        right: 3px;\n        color: white;\n        text-shadow: 1px, 1px 8px #ccc;\n      }\n      &::after {\n        content: \"歌单\";\n        width: 40px;\n        height: 19px;\n        line-height: 19px;\n        background-color: #ca0f0c;\n        color: white;\n        text-shadow: 1px 1px 5px #eee;\n        font-size: 12px;\n        font-weight: bold;\n        position: absolute;\n        top: 20px;\n        left: 0px;\n        border-top-right-radius: 10px;\n        border-bottom-right-radius: 10px;\n        text-align: left;\n        padding-left: 6px;\n      }\n    }\n    .right {\n      flex: 1;\n      margin-left: 10px;\n      padding-top: 10px;\n      p {\n        text-align: left;\n        color: white;\n        font-size: 18px;\n        font-weight: bold;\n      }\n      .avatar {\n        margin-top: 20px;\n        text-align: left;\n        img {\n          width: 30px;\n          height: 30px;\n          border-radius: 50%;\n          vertical-align: middle;\n        }\n        span {\n          margin-left: 10px;\n          font-size: 12px;\n          color: #a5a89b;\n          text-shadow: 0px 0px 1px #ccc;\n        }\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TopContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TopContent.vue?vue&type=template&id=78551607&scoped=true&\"\nimport script from \"./TopContent.vue?vue&type=script&lang=js&\"\nexport * from \"./TopContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TopContent.vue?vue&type=style&index=0&id=78551607&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"78551607\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"recommendContent\">\n    <TopContent :detailData=\"detailData\"></TopContent>\n    <div class=\"singsList\">歌曲列表</div>\n    <ul>\n      <ListItem\n        v-for=\"(item, index) in songsList\"\n        :key=\"item.id\"\n        :item=\"item\"\n        :num=\"index + 1\"\n      >\n        <div class=\"order\">{{ index + 1 }}</div>\n      </ListItem>\n    </ul>\n    <p ref=\"scrllBar\"><Loading v-show=\"searching\" /></p>\n    <p v-show=\"!searching && noMore\">没有更多内容了！</p>\n  </div>\n</template>\n\n<script>\nimport TopContent from '../components/TopContent'\nimport ListItem from '../components/ListItem'\nimport Loading from '../components/Loading'\nexport default {\n  name: 'RecommendContent',\n  props: ['id'],\n  data () {\n    return {\n      detailData: {\n        coverImgUrl: '',\n        name: null,\n        creator: {\n          avatarUrl: '',\n          nikename: null\n        },\n        playCount: 0,\n        trackIds: []\n      },\n      songsList: [],\n      searching: false,\n      num: 0,\n      noMore: false,\n      isRequest: true\n    }\n  },\n  components: {\n    TopContent,\n    ListItem,\n    Loading\n  },\n  created () {\n    // this.isRequest = true;\n    window.addEventListener('scroll', this.getMore);\n  },\n  destroyed () {\n    window.removeEventListener('scroll', this.getMore);\n  },\n  methods: {\n    getMore () {\n      let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n      let clientHeight = document.documentElement.clientHeight || document.body.clientHeight;\n      let barTop = this.$refs.scrllBar.offsetTop;\n      if (scrollTop + clientHeight > barTop) {\n        this.num++;\n        this.getData(this);\n      }\n    },\n    getData (vm) {\n      let musicIds = [];\n      let musicIdsStr = [];\n      // console.log(vm.isRequest);\n      if (vm.isRequest) {\n        vm.searching = true;\n\n        vm.$http.get('/playlist/detail?id=' + vm.id)\n          .then(data => {\n            // console.log(data);\n            vm.detailData = {\n              coverImgUrl: data.data.playlist.coverImgUrl,\n              name: data.data.playlist.name,\n              creator: {\n                avatarUrl: data.data.playlist.creator.avatarUrl,\n                nickname: data.data.playlist.creator.nickname\n              },\n              playCount: data.data.playlist.playCount,\n              trackIds: data.data.playlist.trackIds\n            }\n            // console.log('aaaaa', vm.detailData);\n            musicIds = data.data.playlist.trackIds.slice(vm.num * 20, (vm.num + 1) * 20);\n            // console.log(musicIds.length);\n            if (musicIds.length >= 20) {\n              musicIds.forEach(v => {\n                musicIdsStr.push(v.id);\n              })\n              musicIdsStr = musicIdsStr.join(',');\n              vm.noMore = false;\n              vm.isRequest = true;\n            } else {\n              vm.noMore = true;\n              vm.isRequest = false;\n            }\n          })\n          .then(() => {\n            if (musicIds.length >= 20) {\n              vm.$http.get('/song/detail?ids=' + musicIdsStr)\n                .then(data => {\n                  // console.log(data);\n                  for (var i = 0; i < data.data.songs.length; i++) {\n                    vm.songsList.push({\n                      name: data.data.songs[i].name,\n                      id: data.data.songs[i].id,\n                      song: {\n                        privilege: {\n                          maxbr: 0\n                        },\n                        artists: data.data.songs[i].ar,\n                        album: data.data.songs[i].al\n                      }\n                    });\n                  }\n                  vm.$root.playMusic.musicList = vm.songsList;\n                  // console.log('song', vm.songsList);\n                })\n            } else {\n              vm.searching = false;\n            }\n          })\n          .finally(() => {\n            // vm.isRequest = false;\n            vm.searching = false;\n          })\n      }\n    }\n  },\n  beforeRouteEnter (to, from, next) {\n    next(vm => {\n      vm.isRequest = true;\n      vm.num = 0;\n      vm.songsList = [];\n      vm.getData(vm);\n    })\n  },\n  // beforeRouteUpdate () {\n  //   console.log('update');\n  //   this.isRequest = true;\n  // }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.recommendContent {\n  .singsList {\n    width: 100%;\n    height: 206x;\n    line-height: 26px;\n    background-color: #eeeff0;\n    font-size: 12px;\n    text-align: left;\n    padding-left: 8px;\n  }\n  ul {\n    padding: 0 8px 0 40px;\n    li {\n      position: relative;\n      .order {\n        position: absolute;\n        top: 15px;\n        left: -30px;\n        font-size: 18px;\n        margin-right: 10px;\n        font-weight: bold;\n        color: #999999;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecommendContent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecommendContent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RecommendContent.vue?vue&type=template&id=04d27458&scoped=true&\"\nimport script from \"./RecommendContent.vue?vue&type=script&lang=js&\"\nexport * from \"./RecommendContent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RecommendContent.vue?vue&type=style&index=0&id=04d27458&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04d27458\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecommendContent.vue?vue&type=style&index=0&id=04d27458&lang=less&scoped=true&\""],"sourceRoot":""}