(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-620e7edf"],{"032f":function(t,e,s){"use strict";s("a6f2")},"13d5":function(t,e,s){"use strict";var r=s("23e7"),a=s("d58f").left,i=s("a640"),o=s("ae40"),c=s("2d00"),h=s("605d"),n=i("reduce"),l=o("reduce",{1:0}),u=!h&&c>79&&c<83;r({target:"Array",proto:!0,forced:!n||!l||u},{reduce:function(t){return a(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1a56":function(t,e,s){},"2d3b":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.searchList(t.searchVal)}}},[s("div",{staticClass:"searchBox"},[s("i"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchVal,expression:"searchVal"}],attrs:{type:"text",placeholder:"搜索歌曲、歌手、专辑"},domProps:{value:t.searchVal},on:{input:[function(e){e.target.composing||(t.searchVal=e.target.value)},t.searching]}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],on:{click:t.close}})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hotSearchShow,expression:"hotSearchShow"}],staticClass:"hotSearch"},[t._m(0),s("div",{staticClass:"hotSearchResult"},[s("ul",t._l(t.hotSearchResult,(function(e,r){return s("li",{key:r,on:{click:t.searchCurrent}},[t._v(" "+t._s(e.first)+" ")])})),0)])]),s("ul",{staticClass:"record"},t._l(t.historyRecord,(function(e,r){return s("Record",{directives:[{name:"show",rawName:"v-show",value:t.recordShow,expression:"recordShow"}],key:r,attrs:{item:e,index:r},on:{localStorageDataChange:t.localStorageDataChange}})})),1),s("SearchResult",{directives:[{name:"show",rawName:"v-show",value:!t.loadingShow&&t.searchResultShow,expression:"!loadingShow && searchResultShow"}],attrs:{result:t.result,searchVal:t.searchVal,searchMusicFirstName:t.searchMusicFirstName},on:{searchResult:t.searchList}}),s("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loadingShow&&t.searchResultShow,expression:"loadingShow && searchResultShow"}]}),s("Result",{directives:[{name:"show",rawName:"v-show",value:t.resultShow,expression:"resultShow"}],attrs:{searchMusicList:t.searchMusicList,keywords:t.searchVal,searchMusicFirstName:t.searchMusicFirstName}})],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",[t._v("热门搜索")])])}],i=(s("99af"),s("d81d"),s("13d5"),s("b0c0"),s("d3b7"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"searchResult"},[s("ul",[s("li",{directives:[{name:"show",rawName:"v-show",value:t.searchVal!=t.searchMusicFirstName,expression:"searchVal != searchMusicFirstName"}],staticClass:"search"},[t._v(" 搜索“"+t._s(t.searchVal)+"” ")]),t._l(t.result,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.searchIt(e)}}},[s("i"),s("span",[t._v(t._s(e.name)+"-"+t._s(t._f("filterItem")(e)))])])}))],2)])}),o=[],c={name:"SearchResult",props:{result:{type:Array,default:function(){return[]}},searchVal:{type:String,default:function(){return""}},searchMusicFirstName:{type:String}},data:function(){return{history:null,historyRecord:[]}},methods:{searchIt:function(t){this.$emit("searchResult",t.name)}},filters:{filterItem:function(t){return t.artists?"歌曲":t.artist?"专辑":"歌手"}}},h=c,n=(s("b8f8"),s("2877")),l=Object(n["a"])(h,i,o,!1,null,"7f018eb6",null),u=l.exports,d=s("3a5e"),f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"result"},[s("p",{directives:[{name:"show",rawName:"v-show",value:0!=t.multimatchResult.length,expression:"multimatchResult.length != 0"}]},[t._v("最佳匹配")]),s("ul",{staticClass:"box"},t._l(t.multimatchResult,(function(e){return s("li",{key:e.id},[s("div",{staticClass:"bestFitting"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:e.picUrl}})]),s("div",{staticClass:"center"},[t._v(" "+t._s(e.occupation)+"："+t._s(e.name)+" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.aliasStr!=[],expression:"item.aliasStr != []"}]},[t._v("("+t._s(t._f("formatAlias")(t.aliasStr))+") ")])]),t._m(0,!0)])])})),0),s("ul",t._l(t.searchMusicList,(function(t){return s("ListItem",{key:t.id,attrs:{item:t}})})),1)])},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right"},[s("i")])}],w=(s("4160"),s("fb6a"),s("159b"),s("af40")),S={name:"Result",props:{searchMusicList:{type:Array,default:function(){return[]}},keywords:String,searchMusicFirstName:String},components:{ListItem:w["a"]},data:function(){return{multimatchResult:[],aliasStr:[]}},watch:{keywords:function(t){var e=this;this.keywords==this.searchMusicFirstName&&(console.log(this.multimatchResult),this.multimatchResult=[],console.log(this.multimatchResult),this.aliasStr=[],this.$http.get("/search/multimatch?keywords="+t).then((function(t){console.log("result1111==>",t);var s=t.data.result.orders.reduce((function(e,s){return"new_mlog"!=s&&"mv"!=s?e.concat(t.data.result[s]):e}),[]);e.multimatchResult=s,console.log(Array.isArray(e.multimatchResult)),console.log(e.multimatchResult),0!=e.multimatchResult.length&&(e.aliasStr=e.multimatchResult[0].alias),console.log("kkkkkk",e.multimatchResult)})))}},filters:{formatAlias:function(t){console.log("val",t);var e="";return t.forEach((function(t){console.log(t),e=e+"/"+t})),e.slice(1)}}},g=S,v=(s("032f"),Object(n["a"])(g,f,m,!1,null,"5dae7f8b",null)),p=v.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"recordLi"},[s("i"),s("div",[s("span",[t._v(t._s(t.item))]),s("i",{on:{click:t.deleteItem}})])])},R=[],b=(s("a434"),{name:"Record",props:["item","index"],data:function(){return{history:null,records:[]}},methods:{deleteItem:function(){console.log(111);var t=JSON.parse(localStorage.getItem("record"));t.splice(this.index,1),localStorage.setItem("record",JSON.stringify(t)),this.history=localStorage.getItem("record"),null!=this.history&&(this.records=JSON.parse(this.history)),this.$emit("localStorageDataChange",this.records)}}}),_=b,N=(s("6f2e"),Object(n["a"])(_,y,R,!1,null,"6520404c",null)),M=N.exports,k={name:"Search",components:{SearchResult:u,Loading:d["a"],Result:p,Record:M},data:function(){return{isShow:!1,searchVal:"",loadingShow:!1,searchResultShow:!0,resultShow:!1,result:[],searchMusicList:[],searchMusicFirstName:"",hotSearchResult:[],hotSearchShow:!0,historyRecord:[],history:null,recordShow:!0}},mounted:function(){this.history=localStorage.getItem("record"),null!=this.history&&(this.historyRecord=JSON.parse(this.history))},methods:{searching:function(){""==this.searchVal?(this.isShow=!1,this.recordShow=!0,this.searchResultShow=!1):(this.isShow=!0,this.recordShow=!1,this.searchResultShow=!0)},close:function(){this.searchVal="",this.resultShow=!1,this.recordShow=!0,this.searchResultShow=!1},searchList:function(t){var e=this;if(""==this.searchVal?this.recordShow=!0:this.recordShow=!1,this.loadingShow=!0,this.searchResultShow=!0,this.resultShow=!1,this.history=localStorage.getItem("record"),null==this.history)this.history=[],this.history.push(t),localStorage.setItem("record",JSON.stringify(this.history)),this.historyRecord=this.history;else{var s=JSON.parse(this.history);s.push(t),localStorage.setItem("record",JSON.stringify(s)),this.historyRecord=s}this.$http.get("/search?keywords="+t).then((function(t){console.log(t),200==t.data.code&&(e.searchMusicList=t.data.result.songs.map((function(t){return{name:t.name,id:t.id,highlights:t.name,song:{artists:t.artists,album:t.album,privilege:{maxbr:33e4}}}}))),e.$root.playMusic.musicList=e.searchMusicList})).finally((function(){e.resultShow=!0,e.searchResultShow=!1,e.loadingShow=!1,e.searchVal=e.searchMusicList[0].name,e.searchMusicFirstName=e.searchMusicList[0].name,console.log(1111),console.log(e.searchVal),console.log(e.searchMusicFirstName)}))},searchCurrent:function(t){this.searchVal=t.target.innerHTML,this.hotSearchShow=!1,this.recordShow=!1,this.isShow=!0},localStorageDataChange:function(t){this.historyRecord=t}},watch:{searchVal:function(t){var e=this;""!=this.searchVal&&this.searchVal!=this.searchMusicFirstName?(this.loadingShow=!0,this.searchResultShow=!0,this.resultShow=!1,this.hotSearchShow=!1,this.$http.get("/search/suggest?keywords="+t).then((function(t){if(200==t.data.code&&t.data.result.order){var s=t.data.result.order.reduce((function(e,s){if("playlists"!=s){var r=t.data.result[s];return e.concat(r)}return e}),[]);e.result=s,e.searchVal!=e.searchMusicFirstName&&""!=e.searchVal||(e.result=[])}})).finally((function(){e.loadingShow=!1}))):""==this.searchVal?this.hotSearchShow=!0:this.searchResultShow=!1}},beforeRouteEnter:function(t,e,s){s((function(t){t.$http.get("/search/hot").then((function(e){console.log(e),t.hotSearchResult=e.data.result.hots}))}))}},x=k,V=(s("88bb"),Object(n["a"])(x,r,a,!1,null,"05fa94a2",null));e["default"]=V.exports},"6f2e":function(t,e,s){"use strict";s("bf01")},"7ac9":function(t,e,s){},"88bb":function(t,e,s){"use strict";s("1a56")},a434:function(t,e,s){"use strict";var r=s("23e7"),a=s("23cb"),i=s("a691"),o=s("50c4"),c=s("7b0b"),h=s("65f0"),n=s("8418"),l=s("1dde"),u=s("ae40"),d=l("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,w=Math.min,S=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!f},{splice:function(t,e){var s,r,l,u,d,f,v=c(this),p=o(v.length),y=a(t,p),R=arguments.length;if(0===R?s=r=0:1===R?(s=0,r=p-y):(s=R-2,r=w(m(i(e),0),p-y)),p+s-r>S)throw TypeError(g);for(l=h(v,r),u=0;u<r;u++)d=y+u,d in v&&n(l,u,v[d]);if(l.length=r,s<r){for(u=y;u<p-r;u++)d=u+r,f=u+s,d in v?v[f]=v[d]:delete v[f];for(u=p;u>p-r+s;u--)delete v[u-1]}else if(s>r)for(u=p-r;u>y;u--)d=u+r-1,f=u+s-1,d in v?v[f]=v[d]:delete v[f];for(u=0;u<s;u++)v[u+y]=arguments[u+2];return v.length=p-r+s,l}})},a6f2:function(t,e,s){},b8f8:function(t,e,s){"use strict";s("7ac9")},bf01:function(t,e,s){},d58f:function(t,e,s){var r=s("1c0b"),a=s("7b0b"),i=s("44ad"),o=s("50c4"),c=function(t){return function(e,s,c,h){r(s);var n=a(e),l=i(n),u=o(n.length),d=t?u-1:0,f=t?-1:1;if(c<2)while(1){if(d in l){h=l[d],d+=f;break}if(d+=f,t?d<0:u<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:u>d;d+=f)d in l&&(h=s(h,l[d],d,n));return h}};t.exports={left:c(!1),right:c(!0)}},fb6a:function(t,e,s){"use strict";var r=s("23e7"),a=s("861d"),i=s("e8b5"),o=s("23cb"),c=s("50c4"),h=s("fc6a"),n=s("8418"),l=s("b622"),u=s("1dde"),d=s("ae40"),f=u("slice"),m=d("slice",{ACCESSORS:!0,0:0,1:2}),w=l("species"),S=[].slice,g=Math.max;r({target:"Array",proto:!0,forced:!f||!m},{slice:function(t,e){var s,r,l,u=h(this),d=c(u.length),f=o(t,d),m=o(void 0===e?d:e,d);if(i(u)&&(s=u.constructor,"function"!=typeof s||s!==Array&&!i(s.prototype)?a(s)&&(s=s[w],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return S.call(u,f,m);for(r=new(void 0===s?Array:s)(g(m-f,0)),l=0;f<m;f++,l++)f in u&&n(r,l,u[f]);return r.length=l,r}})}}]);
//# sourceMappingURL=chunk-620e7edf.3138b696.js.map