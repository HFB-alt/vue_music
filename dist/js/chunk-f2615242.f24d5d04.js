(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f2615242"],{"032f":function(t,e,s){"use strict";s("a6f2")},"13d5":function(t,e,s){"use strict";var a=s("23e7"),r=s("d58f").left,i=s("a640"),c=s("ae40"),o=s("2d00"),n=s("605d"),l=i("reduce"),h=c("reduce",{1:0}),u=!n&&o>79&&o<83;a({target:"Array",proto:!0,forced:!l||!h||u},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"2d3b":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search"},[s("form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.searchList(t.keywords)}}},[s("div",{staticClass:"searchBox"},[s("i"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchVal,expression:"searchVal"}],attrs:{type:"text",placeholder:"搜索歌曲、歌手、专辑"},domProps:{value:t.searchVal},on:{input:[function(e){e.target.composing||(t.searchVal=e.target.value)},t.searching]}}),s("i",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],on:{click:t.close}})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.hotSearchShow,expression:"hotSearchShow"}],staticClass:"hotSearch"},[t._m(0),s("div",{staticClass:"hotSearchResult"},[s("ul",t._l(t.hotSearchResult,(function(e,a){return s("li",{key:a,on:{click:t.searchCurrent}},[t._v(" "+t._s(e.first)+" ")])})),0)])]),s("SearchResult",{directives:[{name:"show",rawName:"v-show",value:!t.loadingShow&&t.searchResultShow,expression:"!loadingShow && searchResultShow"}],attrs:{result:t.result,searchVal:t.searchVal,searchMusicFirstName:t.searchMusicFirstName},on:{searchResult:t.searchList}}),s("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loadingShow&&t.searchResultShow,expression:"loadingShow && searchResultShow"}]}),s("Result",{directives:[{name:"show",rawName:"v-show",value:t.resultShow,expression:"resultShow"}],attrs:{searchMusicList:t.searchMusicList,keywords:t.searchVal,searchMusicFirstName:t.searchMusicFirstName}})],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",[t._v("热门搜索")])])}],i=(s("99af"),s("d81d"),s("13d5"),s("b0c0"),s("d3b7"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"searchResult"},[s("ul",[s("li",{directives:[{name:"show",rawName:"v-show",value:t.searchVal!=t.searchMusicFirstName,expression:"searchVal != searchMusicFirstName"}],staticClass:"search"},[t._v(" 搜索“"+t._s(t.searchVal)+"” ")]),t._l(t.result,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.$emit("searchResult",e.name)}}},[s("i"),s("span",[t._v(t._s(e.name)+"-"+t._s(t._f("filterItem")(e)))])])}))],2)])}),c=[],o={name:"SearchResult",props:{result:{type:Array,default:function(){return[]}},searchVal:{type:String,default:function(){return""}},searchMusicFirstName:{type:String}},filters:{filterItem:function(t){return t.artists?"歌曲":t.artist?"专辑":"歌手"}}},n=o,l=(s("6bfd"),s("2877")),h=Object(l["a"])(n,i,c,!1,null,"3cc39046",null),u=h.exports,f=s("3a5e"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"result"},[s("p",{directives:[{name:"show",rawName:"v-show",value:0!=t.multimatchResult.length,expression:"multimatchResult.length != 0"}]},[t._v("最佳匹配")]),s("ul",{staticClass:"box"},t._l(t.multimatchResult,(function(e){return s("li",{key:e.id},[s("div",{staticClass:"bestFitting"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:e.picUrl}})]),s("div",{staticClass:"center"},[t._v(" "+t._s(e.occupation)+"："+t._s(e.name)+" "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.aliasStr!=[],expression:"item.aliasStr != []"}]},[t._v("("+t._s(t._f("formatAlias")(t.aliasStr))+") ")])]),t._m(0,!0)])])})),0),s("ul",t._l(t.searchMusicList,(function(t){return s("ListItem",{key:t.id,attrs:{item:t}})})),1)])},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right"},[s("i")])}],w=(s("4160"),s("fb6a"),s("159b"),s("af40")),v={name:"Result",props:{searchMusicList:{type:Array,default:function(){return[]}},keywords:String,searchMusicFirstName:String},components:{ListItem:w["a"]},data:function(){return{multimatchResult:[],aliasStr:[]}},watch:{keywords:function(t){var e=this;this.keywords==this.searchMusicFirstName&&(console.log(this.multimatchResult),this.multimatchResult=[],console.log(this.multimatchResult),this.aliasStr=[],this.$http.get("/search/multimatch?keywords="+t).then((function(t){console.log("result1111==>",t);var s=t.data.result.orders.reduce((function(e,s){return"new_mlog"!=s&&"mv"!=s?e.concat(t.data.result[s]):e}),[]);e.multimatchResult=s,console.log(Array.isArray(e.multimatchResult)),console.log(e.multimatchResult),0!=e.multimatchResult.length&&(e.aliasStr=e.multimatchResult[0].alias),console.log("kkkkkk",e.multimatchResult)})))}},filters:{formatAlias:function(t){console.log("val",t);var e="";return t.forEach((function(t){console.log(t),e=e+"/"+t})),e.slice(1)}}},S=v,g=(s("032f"),Object(l["a"])(S,d,m,!1,null,"5dae7f8b",null)),p=g.exports,R={name:"Search",components:{SearchResult:u,Loading:f["a"],Result:p},data:function(){return{isShow:!1,searchVal:"",loadingShow:!1,searchResultShow:!0,resultShow:!1,result:[],searchMusicList:[],searchMusicFirstName:"",hotSearchResult:[],hotSearchShow:!0}},methods:{searching:function(){""==this.searchVal?this.isShow=!1:this.isShow=!0},close:function(){this.searchVal="",this.resultShow=!1},searchList:function(t){var e=this;this.loadingShow=!0,this.searchResultShow=!0,this.resultShow=!1,this.$http.get("/search?keywords="+t).then((function(t){console.log(t),200==t.data.code&&(e.searchMusicList=t.data.result.songs.map((function(t){return{name:t.name,id:t.id,highlights:t.name,song:{artists:t.artists,album:t.album,privilege:{maxbr:33e4}}}}))),e.$root.playMusic.musicList=e.searchMusicList})).finally((function(){e.resultShow=!0,e.searchResultShow=!1,e.loadingShow=!1,e.searchVal=e.searchMusicList[0].name,e.searchMusicFirstName=e.searchMusicList[0].name,console.log(1111),console.log(e.searchVal),console.log(e.searchMusicFirstName)}))},searchCurrent:function(t){this.searchVal=t.target.innerHTML,this.hotSearchShow=!1}},watch:{searchVal:function(t){var e=this;""!=this.searchVal&&this.searchVal!=this.searchMusicFirstName?(this.loadingShow=!0,this.searchResultShow=!0,this.resultShow=!1,this.hotSearchShow=!1,this.$http.get("/search/suggest?keywords="+t).then((function(t){if(200==t.data.code&&t.data.result.order){var s=t.data.result.order.reduce((function(e,s){if("playlists"!=s){var a=t.data.result[s];return e.concat(a)}return e}),[]);e.result=s,e.searchVal!=e.searchMusicFirstName&&""!=e.searchVal||(e.result=[])}})).finally((function(){e.loadingShow=!1}))):""==this.searchVal?this.hotSearchShow=!0:this.searchResultShow=!1}},beforeRouteEnter:function(t,e,s){s((function(t){t.$http.get("/search/hot").then((function(e){console.log(e),t.hotSearchResult=e.data.result.hots}))}))}},y=R,_=(s("dadd"),Object(l["a"])(y,a,r,!1,null,"61d5f10b",null));e["default"]=_.exports},"47f9":function(t,e,s){},"4f08":function(t,e,s){},"6bfd":function(t,e,s){"use strict";s("47f9")},a6f2:function(t,e,s){},d58f:function(t,e,s){var a=s("1c0b"),r=s("7b0b"),i=s("44ad"),c=s("50c4"),o=function(t){return function(e,s,o,n){a(s);var l=r(e),h=i(l),u=c(l.length),f=t?u-1:0,d=t?-1:1;if(o<2)while(1){if(f in h){n=h[f],f+=d;break}if(f+=d,t?f<0:u<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:u>f;f+=d)f in h&&(n=s(n,h[f],f,l));return n}};t.exports={left:o(!1),right:o(!0)}},dadd:function(t,e,s){"use strict";s("4f08")},fb6a:function(t,e,s){"use strict";var a=s("23e7"),r=s("861d"),i=s("e8b5"),c=s("23cb"),o=s("50c4"),n=s("fc6a"),l=s("8418"),h=s("b622"),u=s("1dde"),f=s("ae40"),d=u("slice"),m=f("slice",{ACCESSORS:!0,0:0,1:2}),w=h("species"),v=[].slice,S=Math.max;a({target:"Array",proto:!0,forced:!d||!m},{slice:function(t,e){var s,a,h,u=n(this),f=o(u.length),d=c(t,f),m=c(void 0===e?f:e,f);if(i(u)&&(s=u.constructor,"function"!=typeof s||s!==Array&&!i(s.prototype)?r(s)&&(s=s[w],null===s&&(s=void 0)):s=void 0,s===Array||void 0===s))return v.call(u,d,m);for(a=new(void 0===s?Array:s)(S(m-d,0)),h=0;d<m;d++,h++)d in u&&l(a,h,u[d]);return a.length=h,a}})}}]);
//# sourceMappingURL=chunk-f2615242.f24d5d04.js.map